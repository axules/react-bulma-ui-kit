{"version":3,"file":"useRefCallback.js","names":["_react","require","useRefCallback","initValue","onChange","main","useMemo","value","ref","current","prevValue"],"sources":["../src/useRefCallback.js"],"sourcesContent":["import { useMemo } from 'react';\r\n\r\n/**\r\n * Returns ref, calls `onChange` once `ref.current` is changed.\r\n * Do nothing if you change something in deep of current (e.g `ref.current.value = 100;`).\r\n * @param {any?} initValue Initialize value. Could be null or undefined\r\n * @param {Function(value, prevValue)} onChange Callback which will be called once `ref.current` is changed\r\n * @returns {Object} { current }\r\n * @example\r\n * const ref = useRefCallback(10, (val, prevVal) => console.log(prevValue, ' to ', value));\r\n * ref.current += 20;\r\n * // prints '10 to 30'\r\n */\r\nexport function useRefCallback(initValue, onChange) {\r\n  const main = useMemo(\r\n    () => ({\r\n      value: initValue,\r\n      ref: {\r\n        get current() {\r\n          return main.value;\r\n        },\r\n        set current(value) {\r\n          if (main.value !== value) {\r\n            const prevValue = main.value;\r\n            main.value = value;\r\n            onChange(value, prevValue);\r\n          }\r\n        },\r\n      }\r\n    }),\r\n    // we need to create this main object only once - when component is initializing\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    []\r\n  );\r\n\r\n  return main.ref;\r\n}"],"mappings":";;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASC,cAAcA,CAACC,SAAS,EAAEC,QAAQ,EAAE;EAClD,MAAMC,IAAI,GAAG,IAAAC,cAAO,EAClB,OAAO;IACLC,KAAK,EAAEJ,SAAS;IAChBK,GAAG,EAAE;MACH,IAAIC,OAAOA,CAAA,EAAG;QACZ,OAAOJ,IAAI,CAACE,KAAK;MACnB,CAAC;MACD,IAAIE,OAAOA,CAACF,KAAK,EAAE;QACjB,IAAIF,IAAI,CAACE,KAAK,KAAKA,KAAK,EAAE;UACxB,MAAMG,SAAS,GAAGL,IAAI,CAACE,KAAK;UAC5BF,IAAI,CAACE,KAAK,GAAGA,KAAK;UAClBH,QAAQ,CAACG,KAAK,EAAEG,SAAS,CAAC;QAC5B;MACF;IACF;EACF,CAAC,CAAC;EACF;EACA;EACA,EACF,CAAC;EAED,OAAOL,IAAI,CAACG,GAAG;AACjB","ignoreList":[]}